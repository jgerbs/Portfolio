@* Jack Gerber - A01266976
   Date: Nov 05, 2025 *@

@model BlogApp.Models.Article

@{
    ViewData["Title"] = "Edit Article";
}

<h2>@ViewData["Title"]</h2>

<br />

<form asp-action="Edit" method="post" enctype="multipart/form-data">
    <input type="hidden" asp-for="ArticleId" />

    <!-- TITLE -->
    <div class="form-group mb-3">
        <label asp-for="Title" class="form-label">Title</label>
        <input asp-for="Title" class="form-control" required />
        <span asp-validation-for="Title" class="text-danger"></span>
    </div>

    <!-- SHORT DESCRIPTION -->
    <div class="form-group mb-3">
        <label asp-for="ShortDescription" class="form-label">Short Description</label>
        <textarea asp-for="ShortDescription"
                  class="form-control"
                  rows="2"
                  maxlength="300"></textarea>
        <span asp-validation-for="ShortDescription" class="text-danger"></span>
    </div>

    <!-- CURRENT IMAGE PREVIEW -->
    @if (!string.IsNullOrEmpty(Model.CoverImageUrl))
    {
        <div class="mb-3">
            <label class="form-label">Current Cover Image</label>
            <div>
                <img src="@Model.CoverImageUrl"
                     alt="Current image"
                     class="img-fluid rounded mb-2"
                     style="max-height:220px;" />
            </div>
        </div>
    }

    <!-- COVER IMAGE URL -->
    <div class="form-group mb-3">
        <label class="form-label">Cover Image URL (optional)</label>
        <input asp-for="CoverImageUrl"
               class="form-control"
               placeholder="Paste image URL or upload below" />
    </div>

    <!-- FILE UPLOAD -->
    <div class="form-group mb-3">
        <label class="form-label">Or upload a new image</label>
        <input type="file"
               name="ImageFile"
               class="form-control"
               accept="image/*" />
        <small class="text-muted">Uploading an image replaces the current one.</small>
    </div>

    <!-- TINYMCE CONTENT -->
    <div class="form-group mb-3">
        <label asp-for="ContentHtml" class="form-label">Content</label>
        <textarea id="ContentHtml" asp-for="ContentHtml" class="form-control"></textarea>
        <span asp-validation-for="ContentHtml" class="text-danger"></span>
    </div>

    <button type="submit" class="btn btn-primary">Save Changes</button>
    <a href="@Url.Action("Index", "Home")" class="btn btn-secondary">Back to Articles</a>
</form>

@section Scripts {
    <script src="https://cdn.tiny.cloud/1/ls2vbg938v0xfvzhta3gbj4s2l30js8udtwi1lk2c9270xn4/tinymce/6/tinymce.min.js"
            referrerpolicy="origin"></script>

    <script>
        tinymce.init({
            selector: '#ContentHtml',
            plugins: 'image link media code lists',
            toolbar: 'undo redo | styles | bold italic underline | ' +
                     'alignleft aligncenter alignright | bullist numlist | ' +
                     'link image media | code',
            height: 500,
            menubar: false,
            branding: false,
            content_style: "body { background-color: #0A1E24; color: #E6F4F8; font-family: 'Inter', sans-serif; }"
        });
    </script>
}
